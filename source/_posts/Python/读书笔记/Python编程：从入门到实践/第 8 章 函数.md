---
title: 《Python编程：从入门到实践》 第 8 章 函数
tags:
  - Python
  - 读书笔记
categories:
  - Python
  - 读书笔记
permalink: python-study-notes/python-crash-course/chapter-8-functions
---
# 第 8 章 函数

函数是带名字的代码块，用于完成具体的工作。要执行函数定义的任务，可调用该函数。

- 函数可反复调用；
- 使用函数将使程序的编写、阅读、测试和修改都更容易。

<!-- more -->

## 8.1 定义函数

```python
def greet_user():
   """显示简单的问候语"""
   print("Hello!")

greet_user()
```

函数定义：

- 用 `def` 定义函数名；
- 函数名后必须有一对括号；
- 最后冒号结束函数的定义。

文档字符串：

- 描述函数的用途；
- 用三个单引号或双引号括起；
- 写在函数体的首行；
- 用来生成函数的文档。

文档字符串（扩展）：

- 引号中间可以换行；
- `函数名.__doc__`  。

函数调用：

- 函数名后面跟着一对括号。

### 8.1.1 向函数传递信息

在函数名后的括号内添加 `username` ，就可在函数内使用你给 `username`  的任何值。

```python
def greet_user(username):
   """显示简单的问候语"""
   print("Hello, " + username.title() + "!")

greet_user('jesse')
```

### 8.1.2 实参和形参

形参：是函数定义中的参数变量。
实参：调用函数时传递给函数的信息。

很多人分不清楚实参、形参，见了勿惊。

## 8.2 传递实参

位置实参：要去实参与形参的顺序相同。
关键字实参：每个实参都由变量名和值组成。

### 8.2.1 位置实参

在函数调用时，按照形参的顺序，依次填入实参。

```python
def describe_pet(animal_type, pet_name):
    """显示宠物的信息"""
    print("\nI have a " + animal_type + ".")
    print("My " + animal_type + "'s name is " + pet_name.title() + ".")

describe_pet('hamster', 'harry')
```

1. 调用函数多次
2. 位置实参的顺序很重要

### 8.2.2 关键字实参

- 直接在实参中将把名称和值关联起来。
- 无需考虑实参的顺序，因为已经清楚各值的用途。
- 务必准确指定函数定义中的形参名。

```python
def describe_pet(animal_type, pet_name):
    """显示宠物的信息"""
    print("\nI have a " + animal_type + ".")
    print("My " + animal_type + "'s name is " + pet_name.title() + ".")

describe_pet(animal_type='hamster', pet_name='harry')
```

### 8.2.3 默认值

可给每个形参指定默认值。
函数调用时没有实参，则会使用这个形参的默认值。
形参定义默认值后，可在函数调用时省略相应的实参。

```python
def describe_pet(pet_name, animal_type='dog'):
    """显示宠物的信息"""
    print("\nI have a " + animal_type + ".")
    print("My " + animal_type + "'s name is " + pet_name.title() + ".")

describe_pet(pet_name='willie')
```

### 8.2.4 等效的函数调用

函数会有多种同等效果的调用方式，特别当有形参有默认值时：

```python
def describe_pet(pet_name, animal_type='dog'):
    """显示宠物的信息"""
    print("\nI have a " + animal_type + ".")
    print("My " + animal_type + "'s name is " + pet_name.title() + ".")
    
# 一条名为Willie的小狗
describe_pet('willie')
describe_pet(pet_name='willie')

# 一只名为Harry的仓鼠
describe_pet('harry', 'hamster')
describe_pet(pet_name='harry', animal_type='hamster')
describe_pet(animal_type='hamster', pet_name='harry')
```

### 8.2.5 避免实参错误

下面代码有意的未给函数提供实参，导致产生了错误的提示。错误信息中指出了导致问题的位置，以及需要的实参个数与形参的名称。

```python
def describe_pet(animal_type, pet_name):
    """显示宠物的信息"""
    print("\nI have a " + animal_type + ".")
    print("My " + animal_type + "'s name is " + pet_name.title() + ".")

describe_pet()

Traceback (most recent call last):
  File "pets.py", line 6, in <module>
    describe_pet()
TypeError: describe_pet() missing 2 required positional arguments: 'animal_type' and 'pet_name'

```

为形参提供良好的描述性名称，将能让错误信息更有帮助。